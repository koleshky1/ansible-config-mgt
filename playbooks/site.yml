---
- hosts: all
  tasks:
    - name: Include dynamic variables 
      import_playbook: ../static-assignments/common.yml 
    - include: ../dynamic-assignments/env-vars.yml
      tags:
        - always

- hosts: webservers
  tasks:
    - name: Webserver assignment
      import_playbook: ../static-assignments/webservers.yml

- hosts: db
  tasks:
    - name: Installing db
      import_playbook: ../static-assignments/db.yml

- hosts: lb
  tasks:
    - name: Loadbalancers assignment
      import_playbook: ../static-assignments/loadbalancers.yml
      when: load_balancer_is_required